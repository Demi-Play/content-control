{% extends 'base.html' %}

{% block title %}
  –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤
{% endblock %}

{% block content %}
  <div class="home-container" style="max-width: 1200px; margin: 0 auto; padding: 40px 20px;">
    <h1>–ü—É–±–ª–∏–∫–∞—Ü–∏–∏</h1>
    <a href="{{ url_for('posts.new_post') }}" class="ant-btn ant-btn-primary" style="margin-bottom: 20px;">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</a>
    <div class="site-card-wrapper" style="padding: 20px; display: flex; flex-wrap: wrap; justify-content: center;">
      <div class="ant-row" style="display: flex; flex-wrap: wrap;">
        {% for post in posts %}
          <div class="ant-col ant-col-8" style="padding: 10px; border-radius: 10px;">
            <div class="ant-card" style="width: 100%; border-radius: 120px;">
              <div class="ant-card-body" style="background-color: #5c5c5c; border-radius: 10px;">
                <h3 style="color: #ffffff;">–ê–≤—Ç–æ—Ä: <a href="{{ url_for('auth.profile', user_id=post.user_id) }}" style="color: #ffffff;">{{ post.author.username }}</a></h3>
                <p style="color: #ffffff;">{{ post.content_text }}</p>
                {% if post.file_path %}
                  <div class="media-container">
                    {% if post.file_type == 'image' %}
                      <img src="{{ url_for('static', filename='uploads/' + post.file_path) }}" alt="Post Image" style="width: 100%; height: auto;" />
                    {% elif post.file_type == 'video' %}
                      <video controls style="width: 100%;">
                        <source src="{{ url_for('static', filename='uploads/' + post.file_path) }}" type="video/mp4" />–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                      </video>
                    {% endif %}
                  </div>
                {% endif %}
                <div style="margin-top: 10px;">
                  <!-- –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤ -->
                  <form action="{{ url_for('likes.like_post', post_id=post.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="ant-btn ant-btn-link" style="color: #ffffff;">–õ–∞–π–∫–∏ üëç {{ post.likes|length }}</button>
                  </form>

                  <!-- –°—á–µ—Ç—á–∏–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
                  <a href="{{ url_for('comments.list_comments', post_id=post.id) }}" class="ant-btn ant-btn-link" style="color: #ffffff;">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ {{ post.comments|length }} üí¨</a>
                </div>
                <div style="margin-top: 10px;">
                  {% if post.user_id == current_user.id %}
                    <a href="{{ url_for('posts.edit_post', post_id=post.id) }}" class="ant-btn ant-btn-link">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form action="{{ url_for('posts.delete_post', post_id=post.id) }}" method="POST" style="display:inline;">
                      <button type="submit" class="ant-btn ant-btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                  {% endif %}
                </div>
              </div> <!-- –ó–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç–µ–≥ –¥–ª—è ant-card-body -->
            </div> <!-- –ó–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç–µ–≥ –¥–ª—è ant-card -->
          </div> <!-- –ó–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç–µ–≥ –¥–ª—è ant-col -->
        {% endfor %}
        {% if posts|length == 0 %}
          <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.</p>
        {% endif %}
      </div> <!-- –ó–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç–µ–≥ –¥–ª—è ant-row -->
    </div>
  </div>

  <style>
    .media-container {
      overflow: hidden;
      position: relative;
      width: 100%;
      height: auto;
    }
    img,
    video {
      display: block;
      margin: auto;
    }
    .ant-card {
      min-width: 360px;
    }
    .ant-row {
      
      overflow-y: hidden;

      
    }
    .ant-col {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 50px;
    }
    .home-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
  </style>
{% endblock %}
