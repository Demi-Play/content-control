{% extends 'base.html' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ user.username }}{% endblock %}

{% block content %}
<h1>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ user.username }}</h1>
<p>Email: {{ user.email }}</p>

<h2>–ü–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
<div class="ant-row">
    {% for post in posts %}
    <div class="ant-col ant-col-8" style="padding: 10px;">
        <div class="ant-card" style="width: 100%;">
            <div class="ant-card-body">
                <h3>–ü–æ—Å—Ç ID: {{ post.id }}</h3>
                <p>{{ post.content_text }}</p>
                {% if post.file_path %}
                <div class="media-container">
                    {% if post.file_type == 'image' %}
                    <img src="{{ url_for('static', filename='uploads/' + post.file_path) }}" alt="Post Image" style="width: 100%; height: auto;">
                    {% elif post.file_type == 'video' %}
                    <video controls style="width: 100%;">
                        <source src="{{ url_for('static', filename='uploads/' + post.file_path) }}" type="video/mp4">
                        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                    </video>
                    {% endif %}
                </div>
                {% endif %}
                <!-- –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤ -->
                <span>üëç {{ post.likes|length }}</span>

                <!-- –°—á–µ—Ç—á–∏–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
                <span>üí¨ {{ post.comments|length }}</span>
                <div style="margin-top: 10px;">
                {% if post.user_id == session.get('user_id') %}
                <a href="{{ url_for('posts.edit_post', post_id=post.id) }}" class="ant-btn ant-btn-link">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form action="{{ url_for('posts.delete_post', post_id=post.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="ant-btn ant-btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.</p>
    {% endfor %}
</div>

<a href="{{ url_for('index') }}" class="ant-btn ant-btn-default">–ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
{% endblock %}